<div class="agenda-container">
  <h2>FACTURACIÓN DE SERVICIOS</h2>

  <div class="entradas-list">
    <div *ngFor="let entrada of entradas; let i = index" class="entrada-card">
      <div class="entrada-header">
        <span class="fecha">
          {{ entrada.fechaHora | date:'dd/MM/yyyy' }}
        </span>
        <span class="hora">
          {{ entrada.fechaHora | date:'HH:mm' }}
        </span>
      </div>
      <div class="entrada-body">
        <p><strong>Cliente:</strong> {{ entrada.cliente }}</p>
        <p><strong>Centro:</strong> {{ entrada.centroTrabajo }}</p>
        <p><strong>Servicio:</strong> 
          {{ entrada.servicio?.nombre }}
          <span class="color-tag" [style.background]="entrada.servicio?.color"></span>
        </p>
        <p><strong>Precio:</strong> {{ entrada.precio }}</p>
        <p *ngIf="entrada.paciente"><strong>Paciente:</strong> {{ entrada.paciente }}</p>
        <p *ngIf="entrada.observaciones"><strong>Observaciones:</strong> {{ entrada.observaciones }}</p>
        
        <!-- NUEVA COLUMNA: Checkbox de selección -->
        <label>
          <input 
            type="checkbox" 
            [(ngModel)]="entrada.seleccionado"
          />
          Seleccionar para facturar
        </label>
      </div>
    </div>
  </div>

  <div class="action-buttons">
    <button 
      class="btn btn-success"
      (click)="facturarSeleccionados()"
      [disabled]="!haySeleccionados()"
    >
      <i class="fas fa-file-invoice"></i> FACTURAR SELECCIONADOS
    </button>

    <button routerLink="/app/crearentrada" class="btn btn-primary">
      <i class="fas fa-plus"></i> AÑADIR ENTRADA
    </button>

    <button [routerLink]="'/app/calendar'">
      Calendario
    </button>
  </div>
</div>
